<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Login">

	<resultMap type="AccountVO" id="userList">
		<result column="ID" property="id"/>
		<result column="PW" property="pw"/>
	</resultMap>
	
	<!--로그인 정보 조회 -->
	<select id="selectLoginInfo" parameterType="map" resultMap="userList">
	SELECT  /* selectLoginInfo */ ID ,PW
    FROM    ADMIN_USER
    WHERE   ID = #{userId}
    		AND PW = #{password}
	</select>
	
	<!--로그인 정보 조회 -->
	<select id="selectLoginAdminUser" parameterType="map" resultMap="userList">
	<![CDATA[
    SELECT /* selectLoginAdminUser */
           STATUS   /* 1: 로그인성공 2:id는 존재하나 pw가 맞지 않음 3:존재하지 않는 id */
         , ID
      FROM (
            SELECT 1 STATUS, ID FROM ADMIN_USER WHERE ID = #{userId} AND PW = #{password}   /* 로그인성공 */
            UNION ALL
            SELECT 2 STATUS, ID FROM ADMIN_USER WHERE ID = #{userId}                        /* id는 존재하나 pw가 맞지 않음 */
            UNION ALL
            SELECT 3 STATUS, NULL ID FROM DUAL                                              /* 존재하지 않는 id */
           )
     WHERE ROWNUM <= 1
    ]]>
	</select>
	
</mapper>