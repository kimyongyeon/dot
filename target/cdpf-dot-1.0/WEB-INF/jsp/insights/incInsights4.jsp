<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<!--modal-->
<div class="modal fade" id="myModal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog2">
        <div class="modal_content2 ">
        
            <button type="button" class="close2" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">close</span></button>
            <p class="paper_lfBg "></p>
            <p class="paper_rgBg "></p>
            
            <div class="modal_header2">
                <h2>모바일 11번가의 경쟁력은?<span class="dottxt">주요 쇼핑 앱 이용 통계로 돌아보는 11번가의 경쟁력</span></h2>
                
            </div>
            
            <div class="modal_body2">
                <!--내용1-->
                <div class="news mt10">
                    <h3>모바일 쇼핑의 강자 11번가, data를 통해 주요 쇼핑 앱 이용 고객과의 특성을 살펴보겠습니다.. </h3>
                        <!-- <p class="exp"> </p> -->
                        <div class="layoutLR">
                            <li class=" floatL boxSty" style="width:60%;">
                                <p class="chart" id="insights4_chart_0"></p>
                                <ul class="intxt">
			                        <li>>>   11번가는 월별 이용자 수 1위, 그 뒤에 쿠팡, 위메프, 티몬, G마켓 등이 따라오고 있습니다.</li>
			                        <li>100명의 고객 중</li>
			                        <li>33명은 11번가를 월 1회 이상 사용하고 있고,</li>
			                        <li>29명은 쿠팡을 월 1 회 이상 사용하고 있으니 많은 모바일 고객들이 쇼핑 app을 이용하고 있음을 확인할 수 있었습니다.</li>
			                    </ul>
                            </li>
                            <li class=" floatR boxTable" style="width:38%">
                                <table class="listTB2 tStriped2 ">
                                    <colgroup>
                                    </colgroup>
                                    <thead>
                                        <tr class="thDepth">    <!-- longH -->
                                            <th>App</th>
                                            <th>panel 대상 이용 고객 비율</th>
                                            <th>App</th>
                                            <th>panel 대상 이용 고객 비율</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td class="depth2 txtC" >11번가</td><td>33%  </td>
										<td class="depth2 txtC" >CJ몰</td><td>8%        </td></tr>
										<tr><td class="depth2 txtC" >G9</td><td>1%         </td>
										<td class="depth2 txtC" >GS샵</td><td>10%       </td></tr>
										<tr><td class="depth2 txtC" >G마켓</td><td>12%      </td>
										<td class="depth2 txtC" >롯데닷컴</td><td>2% </td></tr>
										<tr><td class="depth2 txtC" >쇼킹딜</td><td>6%      </td>
										<td class="depth2 txtC" >신세계몰</td><td>1% </td></tr>
										<tr><td class="depth2 txtC" >위메프</td><td>15%     </td>
										<td class="depth2 txtC" >쿠팡</td><td>29%      </td></tr>
										<tr><td class="depth2 txtC" >티몬</td><td>15%      </td>
										<td class="depth2 txtC" >이마트</td><td>3%      </td></tr>
										<tr><td class="depth2 txtC" >롯데마트M</td><td>2% </td>
										<td class="depth2 txtC" >롯데마트</td><td>2% </td></tr>
										<tr><td class="depth2 txtC" >홈플러스</td><td>3% </td><td></td><td></td></tr>
                                    </tbody>
                                </table>
                                <ul class="intxt txtL">
                                    <li><strong> Data : </strong>2015.07 (1개월)</li>
                                    <li><strong> 대상 고객: </strong>panel 1,093,738명</li>
                                </ul>
                            </li>
                        </div>
                        
                </div>
                <!--//내용1-->
                
                <!--내용3-->
                <div class="news mt50">
                        <div class="layoutLR">
                            <li class=" floatL boxSty newsCbox" style="width:100%">
                                <p class="chart" id="insights4_chart_1" style="height:368px"></p>
                                <ul class="intxt">
	                                    <li>>> 그러나, 일별 이용자수로는 쿠팡에 1위를 뺏겨 2위의 자리를 지키고 있습니다. 그 뒤를 위메프, 티몬, G마켓 등이 따르고 있네요. 11번가의 일별 이용 고객이 쿠팡보다 낮은 이유는 과연 무엇일까요?</li>
	                            </ul>
                            </li>
                        </div>
                </div>
                <!--//내용3-->
                
                 <!--내용4-->
                <div class="news mt50">
                    <div class="newsCbox">
                        <div class="layoutLR">
                            <li class=" floatL boxSty" style="width:100%">
                                <p class="chart" id="insights4_chart_2"></p>
                                <ul class="intxt">
                                        <li>11번가 구매주기가 길어질수록, 11번가 app을 사용하는 고객의 비율은 점점 낮아집니다.</br>반면, 11번가 구매주기가 길어질수록, 쿠팡 app을 사용하는 고객의 비율을 약간씩 높아지고 있습니다.</br>11번가의 구매 주기가 길어진다고 해서, 모바일 쇼핑을 하지 않는 것이 아닌 다른 app을 이용해 쇼핑을 하고 있는 것을 확인할 수 있습니다.</li>
                                </ul>
                            </li>
                        </div>
                    </div>
                </div>
                <!--//내용4-->
                
                <!--내용5-->
                <div class="news mt50">
                    <div class="newsCbox">
                        <div class="layoutLR">
                            <li class=" floatL boxSty" style="width:100%">
                                <p class="chart" id="insights4_chart_3"></p>
                                <ul class="intxt">
                                        <li>11번가 app을 이용하는 고객은 쿠팡 이용 고객 대비 VVIP, VIP 비중이 높은 편입니다.</br>반면 쿠팡 app을 이용하면서 11번가도 동시에 사용하는 고객은 BEST의 비율이 매우 높습니다.</br>이런 고객은 11번가를 상대적으로 덜 이용할 뿐, 쇼핑 관련 app은 활발히 이용하는 고객이라고 볼 수 있겠네요!</br>이렇게 쇼핑에는 관심을 갖지만, 경쟁사를 주로 이용하거나 11번가의 로열티가 낮은 고객을 11번가로 끌어오기 위한 노력을 한다면,</br>모바일 11번가는 앞으로 더욱 승승장구할 수 있을 것 같습니다.  </li>
                                </ul>
                            </li>
                        </div>
                    </div>
                </div>
                <!--//내용5-->
                
                <!--내용6-->
                <div class="news mt50">
                        <div class="layoutLR" align="center">
                            <li class=" floatL boxSty" style="width:100%">
                                <p class="chart" id="insights4_chart_4"></p>
                                <ul class="intxt">
                                        <li>11번가 app을 이용하는 고객은 쿠팡 이용 고객 대비 VVIP, VIP 비중이 높은 편입니다.</br>반면 쿠팡 app을 이용하면서 11번가도 동시에 사용하는 고객은 BEST의 비율이 매우 높습니다.</br>이런 고객은 11번가를 상대적으로 덜 이용할 뿐, 쇼핑 관련 app은 활발히 이용하는 고객이라고 볼 수 있겠네요!</br>이렇게 쇼핑에는 관심을 갖지만, 경쟁사를 주로 이용하거나 11번가의 로열티가 낮은 고객을 11번가로 끌어오기 위한 노력을 한다면,</br>모바일 11번가는 앞으로 더욱 승승장구할 수 있을 것 같습니다.  </li>
                                </ul>
                            </li>
                        </div>
                </div>
                <!--//내용6-->
                
            </div>
        </div>
     </div>
 </div>
 <!--!//modal -->
 
 
 
 
 <script>

 var incInsights4 = {
		 showInsight : function(){
			 var charts=[];
			 var myChart = echarts.init($('#insights4_chart_0')[0], GV_CHART_THEME);  this.drawChart0(myChart);   charts.push(myChart);
			 myChart = echarts.init($('#insights4_chart_1')[0], GV_CHART_THEME);  this.drawChart1(myChart);   charts.push(myChart);
			 myChart = echarts.init($('#insights4_chart_2')[0], GV_CHART_THEME);  this.drawChart2(myChart);   charts.push(myChart);
			 myChart = echarts.init($('#insights4_chart_3')[0], GV_CHART_THEME);  this.drawChart3(myChart);   charts.push(myChart);
			 myChart = echarts.init($('#insights4_chart_4')[0], GV_CHART_THEME);  this.drawChart4(myChart);   charts.push(myChart);
			 resizeChartOnWinResizeHandler.on(charts);
		 },
		 cvtformat_val : function(param) {
             return "[" + param[0][1] + "]<br/>" + param[0][0] + " : " + param[0][2] + "%<br/>" ;
         } ,
		 drawChart0 : function(myChart){
		        var appPerPanel = [  ["11번가","CJ몰","G9","GS샵","G마켓","롯데닷컴","쇼킹딜","신세계몰",
		                              "위메프","쿠팡","티몬","이마트","롯데마트M","롯데마트","홈플러스"],
		                             [33,8,1,10,12,2,6,1,15,29,15,3,2,2,3]
		                          ];


		       var option = {
		            title : {
		                text: 'App 별 Panel대상 이용 고객 비율 - 월별',
		            },
		            tooltip : {
		                trigger : 'axis',
		                axisPointer : {            
		                    type : 'shadow'   
		                },
		                formatter : incInsights4.cvtformat_val
		            },
		            legend: {
		            	  y : 50,
		                data:['고객 비율']
		            },
		            xAxis : [
		                {
		                    type : 'category',
		                    data : appPerPanel[0]
		                }
		            ],
		            yAxis : [
		                {
		                    type : 'value',
		                    name : '비율'
		                    
		                }
		            ],
		            series : [
		                {
		                    name:'고객 비율',
		                    type:'bar',
		                    data: appPerPanel[1],
		                    itemStyle: {
		                      normal: {
		                        color : '#40E0D0'
		                       },
		                    },
		                    markPoint : {
		                        data : [
		                            {xAxis : '11번가', yAxis : 34, name : '11번가', 
		                             symbolSize : 17,
		                             value : 33, itemStyle:{normal:{color:'#DC143C'}}}
		                        ]
		                    },
		                },
		                {
		                    type:'line',
		                    data: [33],
		                    symbolSize : 0,
		                    itemStyle: {
		                     normal: {
		                        color : "rgba(0,0,0,0)",
		                        lineStyle: {
		                            width : 0
		                       },
		                       label:{
		                         show:false,
		                       }
		                     }
		                   },
		                   markLine : {
		                        data : [
		                            {type : 'max', name: 'pareto', 
		                            itemStyle: {
		                                normal: {
		                                    color:'#FF8383', 
		                                    label : {
		                                        show: true,
		                                        formatter:function(p){ 
		                                            return  '11번가';
		                                        }
		                                    },
		                                    labelLine : {
		                                        show : true
		                                    },
		                                    lineStyle: {
		                                        width : 2.5
		                                    }
		                                }
		                            },}
		                        ]
		                    }
		                }
		            ]
		        };
             myChart.setOption(option);
		 },
		 
		 drawChart1 : function(myChart){
			 var category = ["11번가","CJ몰","G9","GS샵","G마켓","롯데닷컴","쇼킹딜","신세계몰",
			                    "위메프","쿠팡","티몬","이마트","롯데마트M","롯데마트","홈플러스"];
			    var dataset = [];

			    initData();

			    function initData(){
			        $.ajax({
			            type: "GET",
			            url: '/resources/data/insights/11vsother.csv',
			            dataType: "text",
			            success: function(data) {dataProcess(data);},
			            error: function(err){alert("err"); console.log(err)}
			        });

			    }

			    function dataProcess(data){
			        for(var k = 0; k < 16; k++){
			            dataset.push([]);
			        }

			        data_ = data.split("\n");
			        var arr_idx = 0;
			        data_.forEach(function(entry) {
			            arr_idx = idxItr(arr_idx);
			            var entry_ = entry.split(",");
			            var temp_arr = [];
			            for(var j = 0;  j < entry_.length; j++){
			                dataset[arr_idx].push(entry_[j]);
			            }
			            arr_idx++;
			        });

			        function idxItr(d){
			            return d++;
			        }


			        
			        var seriesList =[
                                     {
                                         name:'11번가',
                                         type : 'line',
                                         data : dataset[1],
                                         symbolSize : 0,
                                         itemStyle: {
                                             normal: {
                                                 color : "#DC143C",
                                                 lineStyle: {
                                                     width : 7
                                                 }
                                             }
                                         }
                                     }
                                 ];
	                 for(var g = 2, category_idx = 1; g < dataset.length; g++, category_idx++){
	                     var seriesIns =  {
	                                          name: category[category_idx],
	                                          type : 'line',
	                                          data : dataset[g],
	                                          symbolSize : 0,
	                                          itemStyle: {
	                                              normal: {
	                                                 lineStyle: {
	                                                     width : 2
	                                                }
	                                              }
	                                          }
	                                      };
	                     seriesList.push(seriesIns);
	                 }
	                 
			        var option = {
			            title : {
			                text: 'App별  panel 대상 이용고객 비율 - 일별'
			            },
			            tooltip : {
			                trigger : 'axis',
			                axisPointer : {            
			                    type : 'shadow'   
			                },
			                formatter:function(p){ 
			                        var rtnText = "[" + p[0][1] + "]<br/>" ;
			                        for(var i = 0; i < p.length; i++){
			                            rtnText += p[i][0] + " : " +  Math.round( p[i].value * 100) / 100 +'% <br>';
			                        }
			                        return rtnText;
			                               
			                }
			            },
			            legend: {
			                data: category,
			                y : 50,
			                textStyle:{fontSize : 14}
			            },
			            grid: {
			                y : 100,
			                y2 : 80
			            },
			            xAxis : [
			                {
			                    type : 'category',
			                    data : dataset[0],
			                     axisLabel : {
			                        rotate : 90,
			                        textStyle:{
			                            fontWight : 'bold',
			                            color : '#000000',
			                            fontSize : 14
			                        }
			                    }
			                }
			            ],
			            yAxis : [
			                {
			                    type : 'value',
			                    name : '매출비중',
			                    axisLabel : {
			                        formatter: '{value} %'
			                    }
			                }
			            ], 
			            series : seriesList
			        };
                 myChart.setOption(option);
	         }
		 },
		 
		 
		 
		 drawChart2 : function(myChart){

		        var AppPerMonth = [  ["11번가","CJ몰","G9","GS샵","G마켓","롯데닷컴","쇼킹딜","신세계몰",
		                              "위메프","쿠팡","티몬"],
		                             [2,2,3,3,4,3,3,3,4,5,4]
		                          ];
		       var option = {
		            title : {
		                text: 'App별 월별 이용일수',
		            },
		            tooltip : {
		                trigger : 'axis',
		                axisPointer : {            
		                    type : 'shadow'   
		                },
		                formatter : incInsights4.cvtformat_val
		            },
		            grid:{y2:30},
		            legend: {
		            	  y : 20,
		                data:['월별 이용일수']
		            },
		            xAxis : [
		                {
		                    type : 'category',
		                    data : AppPerMonth[0]
		                }
		            ],
		            yAxis : [
		                {
		                    type : 'value',
		                    name : '월별 이용일수(중간값)'
		                    
		                }
		            ],
		            series : [
		                {
		                    name:'월별 이용일수',
		                    type:'bar',
		                    data: AppPerMonth[1],
		                    itemStyle: {
		                      normal: {
		                        color : '#FFD700'
		                       },
		                    },
		                    markPoint : {
		                        data : [
		                            {xAxis : '11번가', yAxis : 2.1, name : '11번가', 
		                             symbolSize : 17,
		                             value : 2, itemStyle:{normal:{color:'#DC143C'}}}
		                        ]
		                    }
		                },
		                {
		                    type:'line',
		                    data: [2],
		                    symbolSize : 0,
		                    itemStyle: {
		                     normal: {
		                        color : "rgba(0,0,0,0)",
		                        lineStyle: {
		                            width : 0
		                       },
		                       label:{
		                         show:false,
		                       }
		                     }
		                   },
		                   markLine : {
		                        data : [
		                            {type : 'max', name: 'pareto', 
		                            itemStyle: {
		                                normal: {
		                                    color:'#FF8383', 
		                                    label : {
		                                        show: true,
		                                        formatter:function(p){ 
		                                            return  '11번가';
		                                        }
		                                    },
		                                    labelLine : {
		                                        show : true
		                                    },
		                                    lineStyle: {
		                                        width : 2.5
		                                    }
		                                }
		                            },}
		                        ]
		                    }
		                }
		            ]
		        };

		       
               myChart.setOption(option);
		                    
		 },
		 
		 drawChart3 : function(myChart){

		        var elvVsCp = [  ["1개월","2개월","3개월","6개월","12개월"],
		                             [79, 68, 63, 59, 51],
		                             [53, 56, 57, 57, 56]
		                          ];

		       var option = {
		            title : {
		                text: '11번가 구매주기별 11번가 vs. 쿠팡  app 사용 비율',
		            },
		            tooltip : {
		                trigger : 'axis',
		                axisPointer : {            
		                    type : 'shadow'   
		                },
		                formatter : incInsights4.cvtformat_val
		            },
		            grid : { y2:30 },
		            legend: {
		            y : 20,
		                data:['11번가', '쿠팡']
		            },
		            xAxis : [
		                {
		                    type : 'category',
		                    data : elvVsCp[0]
		                }
		            ],
		            yAxis : [
		                {
		                    type : 'value',
		                }
		            ],
		            series : [
		                {
		                    name:'11번가',
		                    barGap : '3%',
		                    type:'bar',
		                    data: elvVsCp[1],
		                },
		                {
		                    name:'쿠팡',
		                    barGap : '3%',
		                    type:'bar',
		                    data: elvVsCp[2],
		                }
		            ]
		        };


			 
             myChart.setOption(option);
		 },
		 
		 
		 drawChart4 : function(myChart){


		        var elvVsCp = [  ["VVIP","VIP","TOP","BEST","NEW"],
		                             [9.34, 18.97, 37.37, 34.32, 0.00],
		                             [6.66, 15.33, 35.96, 42.04, 0.01]
		                          ];
		        

		       var option = {
		            title : {
		                text: '11번가 vs. 쿠팡app 사용 고객의 11번가 구매 등급',
		            },
		            tooltip : {
		                trigger : 'axis',
		                axisPointer : {            
		                    type : 'shadow'   
		                },
		                formatter : incInsights4.cvtformat_val
		            },
		            grid : {
		                y2 : 30
		            },
		            legend: {
		            y : 20,
		                data:['11번가', '쿠팡']
		            },
		            xAxis : [
		                {
		                    type : 'category',
		                    data : elvVsCp[0]
		                }
		            ],
		            yAxis : [
		                {
		                    type : 'value',
		                    axisLabel : {
		                        formatter : '{value} %'
		                    }
		                }
		            ],
		            series : [
		                {
		                    name:'11번가',
		                    barGap : '3%',
		                    type:'bar',
		                    data: elvVsCp[1],
		                },
		                {
		                    name:'쿠팡',
		                    barGap : '3%',
		                    type:'bar',
		                    data: elvVsCp[2],
		                }
		            ]
		        };

             myChart.setOption(option);
		 },
		 
		 
 };
 
 
 </script>